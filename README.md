## Описание архитектуры проекта
Это веб приложение построенно на mvc архитектуре.
В качестве веб-фреймворка был выбран Play Framework.
Реализованы crud операции для двух ниже описанных моделей:<br><br>
#### Security (Информация о ценных бумагах):
- id
- secid
- regnumber
- name
- emitent_title<br>

#### History (“История торгов за произвольную дату”):<br>
- secid
- tradedate
- numtrades
- open
- close

#### Так же в приложении присутствует модель Summary - сводные данные на основе объектов Security и History:
- secid
- regnumber
- name
- emitent_title
- tradedate
- numtrades
- open
- close

### Описание доступных роутов:

1) **GET** (/) - возвращает список моделей Summary (общую сводку)
2) **GET** (/import) - возвращает представление с формой для импорта файлов с данными
3) **POST** (/import-his) - принимает через форму файл с историей по ценным бумагам для импорта
4) **POST** (/import-sec) - принимает через форму файл с информацией о ценных бумагах для импорта
5) **GET** (/import-af) - импорт данных из приложенных файлов в структуре проекта (*public/inputData*)
6) **GET** (/history) - возвращает представление со списком историй по ценным бумагам
7) **GET** (/history/new) - возвращает представление с формой для создания новой истории по ценной бумаге
8) **POST** (/history/new) - принимает из формы данные для создания новой истории по ценной бумаге
9) **GET** (/history/{secid}) - возвращает представление с информацией о конкретной истории по ценной бумаге по *secid*
10) **POST** (/history/{secid}) - удаляет или обновляет информацию о конкретной истории по ценной бумаге по *secid*
11) **GET** (/security) - возвращает представление со списком информации о ценных бумагах
12) **GET** (/security/new) - возвращает представление с формой для создания новой информации о ценной бумаге
13) **POST** (/security/new) - принимает из формы данные для создания новой информации о ценной бумаге
14) **GET** (/security/{secid}) - возвращает представление с информацией о ценной бумаге по *secid*
15) **POST** (/security/{secid}) - удаляет или обновляет информацию о ценной бумаге по *secid*

Реализовано хранение данных в локальной бд **Sqlite**. Взаимодействие с бд через библиотеку **Slick**.<br>
Реализован простейший фронтэнд для манипуляции импорта файлов с данными и манипуляции над ними.<br>
Доработан импорт данных: при импорте истории по отсутствующей ценной бумаге выполняется
rest запрос к API Московской биржи, через библиотеку **Requests-scala**. Проработана оптимизация обращений - запросы осуществляется
асинхронно, что снижает время ожидания при импорте большого количества историй торговли.<br><br>

Так же в бд реализованы констрейнты, по которым обновление информации или удаление информации о ценной бумаге каскадно.
Обновляется или удаляется так же история об этой бумаге.<br>
При удалении истории, ценные бумаги **не** затрагиваются.
В бд могут существовать ценные бумаги без истории. Истории, не привязанные к ценным бумагам - **нет**.
Связь сущностей производится через *secid*.
Так же реализованы миграции через **Flyway**.<br>
У проекта есть история коммитов, отражающая ход его развития от простого crud api, до mvc приложения.

### Инструкция для запуска:
Windows: выполнить команду в директории проекта - ~\TOTsystemsTestTask> sbt run